###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.51A/W32 for 8051                08/Mar/2010  11:52:25 #
# Copyright 2004-2009 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0- #
#                          1.4.0\Components\hal\target\CC2530EB\hal_buzzer.c  #
#    Command line       =  -f "D:\程式開發\TI Zigbee                          #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tool #
#                          s\CC2530DB\f8wEndev.cfg" (-DCPU32MHZ               #
#                          -DROOT=__near_func -DBLINK_LEDS) -f                #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"   #
#                          (-DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR      #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116 "-DCONST=const __code"    #
#                          -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE     #
#                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100            #
#                          -DRESPONSE_POLL_RATE=100 -DREJOIN_POLL_RATE=440)   #
#                          -f "D:\程式開發\TI Zigbee                          #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tool #
#                          s\CC2530DB\f8wZCL.cfg" (-DZCL_READ -DZCL_WRITE     #
#                          -DZCL_BASIC -DZCL_IDENTIFY -DZCL_ON_OFF            #
#                          -DZCL_KEY_ESTABLISH -DZCL_LOAD_CONTROL             #
#                          -DZCL_SIMPLE_METERING -DZCL_PRICING)               #
#                          -DZCL_MESSAGE "D:\程式開發\TI Zigbee               #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Components\hal\t #
#                          arget\CC2530EB\hal_buzzer.c" -D NWK_AUTO_POLL -D   #
#                          ZTOOL_P1 -D MT_TASK -D MT_APP_FUNC -D MT_SYS_FUNC  #
#                          -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG -D           #
#                          xPOWER_SAVING -lC "D:\程式開發\TI Zigbee           #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\L #
#                          ist\" -lA "D:\程式開發\TI Zigbee                   #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\L #
#                          ist\" --diag_suppress Pe001,Pa010 -o               #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\EndDeviceEB\Obj\" -e                     #
#                          --require_prototypes --debug --core=plain          #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "D:\程式開發\TI Zigbee     #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\" -I          #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\..\SOURCE\" -I "D:\程式開發\TI Zigbee    #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\SOURCE\ #
#                          " -I "D:\程式開發\TI Zigbee                        #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\ZMAI #
#                          N\TI2530DB\" -I "D:\程式開發\TI Zigbee             #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MT\" -I "D:\程式開發\TI Zigbee        #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\HAL\INCLUDE\" -I "D:\程式開發\TI      #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\HAL\TARGET\CC2530EB\" -I       #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\..\..\..\..\..\COMPONENTS\OSAL\MCU\CCSOC #
#                          \" -I "D:\程式開發\TI Zigbee                       #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\OSAL\INCLUDE\" -I "D:\程式開發\TI     #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\STACK\AF\" -I "D:\程式開發\TI  #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\STACK\NWK\" -I                 #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\..\..\..\..\..\COMPONENTS\STACK\SEC\"    #
#                          -I "D:\程式開發\TI Zigbee                          #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\SAPI\" -I "D:\程式開發\TI       #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\STACK\SYS\" -I                 #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\..\..\..\..\..\COMPONENTS\STACK\ZCL\"    #
#                          -I "D:\程式開發\TI Zigbee                          #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\STACK\ZDO\" -I "D:\程式開發\TI        #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\ZMAC\F8W\" -I "D:\程式開發\TI  #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\ZMAC\" -I "D:\程式開發\TI      #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\SERVICES\SADDR\" -I            #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\..\..\..\..\..\COMPONENTS\SERVICES\SDATA #
#                          \" -I "D:\程式開發\TI Zigbee                       #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MAC\INCLUDE\" -I "D:\程式開發\TI      #
#                          Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\ #
#                          zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\ #
#                          ..\..\..\COMPONENTS\MAC\HIGH_LEVEL\" -I            #
#                          "D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0 #
#                          -1.4.0\Projects\zstack\HomeAutomation\SampleSwitch #
#                          \CC2530DB\..\..\..\..\..\COMPONENTS\MAC\LOW_LEVEL\ #
#                          srf04\" -I "D:\程式開發\TI Zigbee                  #
#                          Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Projects\zstack\ #
#                          HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\. #
#                          .\COMPONENTS\MAC\LOW_LEVEL\srf04\SINGLE_CHIP\" -I  #
#                          "C:\Program Files\IAR Systems\Embedded Workbench   #
#                          5.3\8051\INC\" -I "C:\Program Files\IAR            #
#                          Systems\Embedded Workbench 5.3\8051\INC\CLIB\"     #
#                          -Ohz                                               #
#    List file          =  D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0- #
#                          1.4.0\Projects\zstack\HomeAutomation\SampleSwitch\ #
#                          CC2530DB\EndDeviceEB\List\hal_buzzer.lst           #
#    Object file        =  D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0- #
#                          1.4.0\Projects\zstack\HomeAutomation\SampleSwitch\ #
#                          CC2530DB\EndDeviceEB\Obj\hal_buzzer.r51            #
#                                                                             #
#                                                                             #
###############################################################################

D:\程式開發\TI Zigbee Z-Stack\ZStack-CC2530-2.3.0-1.4.0\Components\hal\target\CC2530EB\hal_buzzer.c
      1          //-------------------------------------------------------------------
      2          // Filename: hal_buzzer.c
      3          // Description: hal buzzer library
      4          //-------------------------------------------------------------------
      5          //-------------------------------------------------------------------
      6          // INCLUDES
      7          //-------------------------------------------------------------------
      8          #include "hal_defs.h"
      9          //#include "hal_cc8051.h"
     10          #include "hal_mcu.h"
     11          #include "hal_board.h"
     12          #include "hal_buzzer.h"
     13          
     14          //-------------------------------------------------------------------
     15          // @fn      halBuzzerInit
     16          // @brief    Set up timer 1  to generate an interrupt freq
     17          // @param       uint16 freq
     18          // @return  none
     19          //-------------------------------------------------------------------
     20          void halBuzzerInit(uint16 freq)
     21          {
     22              // Set prescaler divider value to 128
     23              T1CTL |= 0x0C;
     24          
     25              // Multiply cycles by 8 to get freq cycles
     26              // 32MHz/128/64 gives approximately freq
     27              // Set compare value
     28              T1CC0H = HI_UINT16((32000000 / 256) / freq);
     29              T1CC0L = LO_UINT16((32000000 / 256) / freq);
     30          
     31              T1CCTL0 = 0x44;
     32          
     33              T1CTL &= ~0x10; // T1CTL.OVFIF = 0
     34              T1CTL &= ~0x02; // Stop timer
     35              IEN1 &= ~0x02; // Disable interrupt
     36          }
     37          
     38          //-------------------------------------------------------------------
     39          // @fn          halBuzzerOn
     40          // @brief       Turn Buzzer on.
     41          // @param       uint16 freq
     42          // @return      none
     43          //-------------------------------------------------------------------
     44          void halBuzzerOn(uint16 freq)
     45          {
     46              T1CNTL = 0x00; // Reset counter value
     47          
     48              T1CC0H = HI_UINT16((32000000 / 256) / freq);
     49              T1CC0L = LO_UINT16((32000000 / 256) / freq);
     50          
     51              T1CTL |= 0x02; // Start timer
     52              IEN1 |= 0x02; // Enable interrupt
     53          }
     54          
     55          //-------------------------------------------------------------------
     56          // @fn          halBuzzerOff
     57          // @brief       Turn Buzzer off.
     58          // @return      none
     59          //-------------------------------------------------------------------
     60          void halBuzzerOff(void)
     61          {
     62              T1CTL &= ~0x02; // Stop timer
     63              IEN1 &= ~0x02; // Disable interrupt
     64              HAL_BUZZER_OFF();
                     ^
Error[Pe223]: function "HAL_BUZZER_OFF" declared implicitly
     65          }
     66          
     67          //-------------------------------------------------------------------
     68          // @fn          halBuzzer
     69          // @brief       Turn Buzzer on.
     70          // @param       uint16 freq
     71          // @return      none
     72          //-------------------------------------------------------------------
     73          void halBuzzer(uint16 ms)
     74          {
     75              T1CNTL = 0x00; // Reset counter value
     76              T1CTL |= 0x02; // Start timer
     77              IEN1 |= 0x02; // Enable interrupt
     78              halMcuWaitMs(ms);
                     ^
Error[Pe223]: function "halMcuWaitMs" declared implicitly
     79              T1CTL &= ~0x02; // Stop timer
     80              IEN1 &= ~0x02; // Disable interrupt
     81              HAL_BUZZER_OFF();
                     ^
Error[Pe223]: function "HAL_BUZZER_OFF" declared implicitly
     82          }
     83          
     84          //-------------------------------------------------------------------
     85          // @fn      timer32k0_ISR
     86          // @brief   ISR framework for the 32KHz timer component
     87          // @param   none
     88          // @return  none
     89          //-------------------------------------------------------------------
     90          HAL_ISR_FUNCTION(T1_ISR, T1_VECTOR)
     91          {
     92              HAL_BUZZER_TGL();
                     ^
Error[Pe223]: function "HAL_BUZZER_TGL" declared implicitly
     93          }

Errors: 4
Warnings: none
