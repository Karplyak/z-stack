///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V7.51A/W32 for 8051               09/Aug/2013  16:01:17 /
// Copyright 2004-2009 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//    Source file        =  D:\CC2530_ZStack0801\Sensor Network               /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\Source\hal_sensor.c                        /
//    Command line       =  -f "D:\CC2530_ZStack0801\Sensor Network           /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev. /
//                          cfg" (-DCPU32MHZ -DROOT=__near_func               /
//                          -DBLINK_LEDS) -f "D:\CC2530_ZStack0801\Sensor     /
//                          Network Example\Projects\zstack\Sensor Network    /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig /
//                          .cfg" (-DSECURE=0 -DZG_SECURE_DYNAMIC=0           /
//                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800         /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7           /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40          /
//                          -DNWK_MAX_BINDING_ENTRIES=4                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4                       /
//                          "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07, 0x09,     /
//                          0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08,   /
//                          0x0A, 0x0C, 0x0D}" -DMAC_MAX_FRAME_SIZE=116       /
//                          "-DCONST=const __code" -DGENERIC=__generic        /
//                          -DRFD_RCVC_ALWAYS_ON=TRUE -DPOLL_RATE=1000        /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100   /
//                          -DREJOIN_POLL_RATE=440) -f                        /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\Tools\CC2530DB\f8wZCL.cf /
//                          g" (-DZCL_READ -DZCL_WRITE -DZCL_BASIC            /
//                          -DZCL_IDENTIFY -DZCL_ON_OFF -DZCL_KEY_ESTABLISH   /
//                          -DZCL_LOAD_CONTROL -DZCL_SIMPLE_METERING          /
//                          -DZCL_PRICING) -DZCL_MESSAGE                      /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\Source\hal_sensor.c" -D NWK_AUTO_POLL -D   /
//                          ZTOOL_P1 -D MT_TASK -D MT_APP_FUNC -D             /
//                          MT_SYS_FUNC -D MT_ZDO_FUNC -D                     /
//                          LCD_SUPPORTED=DEBUG -D xPOWER_SAVING -D           /
//                          End_Device -D HAL_KEYPAD -D M110 -D xPA2591 -lC   /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\EndDeviceEB_M160\List\" -lA       /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\EndDeviceEB_M160\List\"           /
//                          --diag_suppress Pe001,Pa010 -o                    /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\EndDeviceEB_M160\Obj\" -e         /
//                          --require_prototypes --debug --core=plain         /
//                          --dptr=16,1 --data_model=large                    /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data_rom                /
//                          --nr_virtual_regs 16 -I                           /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint & Device\CC2530DB\"   /
//                          -I "D:\CC2530_ZStack0801\Sensor Network           /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\SOURCE\" -I                    /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\SOURCE\" -I                 /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\ZMAIN\TI2530DB\" -I      /
//                          "D:\CC2530_ZStack0801\Sensor Network              /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\MT\"    /
//                          -I "D:\CC2530_ZStack0801\Sensor Network           /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\INC /
//                          LUDE\" -I "D:\CC2530_ZStack0801\Sensor Network    /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\MOD /
//                          ULE\" -I "D:\CC2530_ZStack0801\Sensor Network     /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\HAL\TAR /
//                          GET\CC2530EB\" -I "D:\CC2530_ZStack0801\Sensor    /
//                          Network Example\Projects\zstack\Sensor Network    /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\OSAL\MC /
//                          U\CCSOC\" -I "D:\CC2530_ZStack0801\Sensor         /
//                          Network Example\Projects\zstack\Sensor Network    /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\OSAL\IN /
//                          CLUDE\" -I "D:\CC2530_ZStack0801\Sensor Network   /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\A /
//                          F\" -I "D:\CC2530_ZStack0801\Sensor Network       /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\N /
//                          WK\" -I "D:\CC2530_ZStack0801\Sensor Network      /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\S /
//                          EC\" -I "D:\CC2530_ZStack0801\Sensor Network      /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\S /
//                          API\" -I "D:\CC2530_ZStack0801\Sensor Network     /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\S /
//                          YS\" -I "D:\CC2530_ZStack0801\Sensor Network      /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\Z /
//                          CL\" -I "D:\CC2530_ZStack0801\Sensor Network      /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\STACK\Z /
//                          DO\" -I "D:\CC2530_ZStack0801\Sensor Network      /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\ZMAC\F8 /
//                          W\" -I "D:\CC2530_ZStack0801\Sensor Network       /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\ZMAC\"  /
//                          -I "D:\CC2530_ZStack0801\Sensor Network           /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\SERVICE /
//                          S\SADDR\" -I "D:\CC2530_ZStack0801\Sensor         /
//                          Network Example\Projects\zstack\Sensor Network    /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\SERVICE /
//                          S\SDATA\" -I "D:\CC2530_ZStack0801\Sensor         /
//                          Network Example\Projects\zstack\Sensor Network    /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\INC /
//                          LUDE\" -I "D:\CC2530_ZStack0801\Sensor Network    /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\HIG /
//                          H_LEVEL\" -I "D:\CC2530_ZStack0801\Sensor         /
//                          Network Example\Projects\zstack\Sensor Network    /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\LOW /
//                          _LEVEL\srf04\" -I "D:\CC2530_ZStack0801\Sensor    /
//                          Network Example\Projects\zstack\Sensor Network    /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\..\..\..\..\..\COMPONENTS\MAC\LOW /
//                          _LEVEL\srf04\SINGLE_CHIP\" -I "C:\Program Files   /
//                          (x86)\IAR Systems\Embedded Workbench              /
//                          5.3\8051\INC\" -I "C:\Program Files (x86)\IAR     /
//                          Systems\Embedded Workbench 5.3\8051\INC\CLIB\"    /
//                          -Ohz                                              /
//    List file          =  D:\CC2530_ZStack0801\Sensor Network               /
//                          Example\Projects\zstack\Sensor Network            /
//                          Application\ZIGBEE Endpoint &                     /
//                          Device\CC2530DB\EndDeviceEB_M160\List\hal_sensor. /
//                          s51                                               /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME hal_sensor

        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN __INIT_XDATA_Z

        PUBLIC TransmitApp_Msg
// D:\CC2530_ZStack0801\Sensor Network Example\Projects\zstack\Sensor Network Application\ZIGBEE Endpoint & Device\Source\hal_sensor.c
//    1 /**************************************************************************************************
//    2   Filename:       hal_sensor.c
//    3   Revised:        $Date: 2010-07-14 (Wed, 14 July 2010) $
//    4   Revision:       $Revision: 19453 $
//    5 
//    6   Description:    HAL Sensor - the device receive the sensor data application.
//    7 **************************************************************************************************/
//    8 /*********************************************************************
//    9  * INCLUDES
//   10  */  
//   11 #include <string.h>
//   12 #include <stdio.h>
//   13 #include "ZComDef.h"
//   14 #include "OSAL.h"
//   15 #include "AF.h"
//   16 #include "ZDApp.h"
//   17 #include "ZDObject.h"
//   18 #include "ZDProfile.h"
//   19 
//   20 #include "mac_radio_defs.h"
//   21 
//   22 /* ZCL */
//   23 #include "zcl.h"
//   24 #include "zcl_general.h"
//   25 #include "zcl_ha.h"
//   26 #include "zcl_zigbee device.h"
//   27 
//   28 /* HAL */
//   29 #include "onboard.h"
//   30 #include "hal_lcd.h"
//   31 #include "hal_led.h"
//   32 #include "hal_key.h"
//   33 #include "MT_UART.h"
//   34 #include "hal_uart.h"
//   35 #include "hal_timer.h"
//   36 #include "hal_keypad.h"
//   37 #include "hal_buzzer.h"
//   38   
//   39 /* HAL Sensor */
//   40 #include "hal_sensor.h"
//   41 
//   42 #if defined(M110)
//   43   #include "M110.h"
//   44 #endif
//   45 #if defined(M140)
//   46   #include "M140.h"
//   47 #endif
//   48 #if defined(M160)
//   49   #include "M160.h"
//   50 #endif
//   51 #if defined(M170)
//   52   #include "M170.h"
//   53 #endif
//   54 #if defined(M190)
//   55   #include "M190.h"
//   56 #endif
//   57 #if defined(M200)
//   58   #include "M200.h"
//   59 #endif
//   60 #if defined(M270)
//   61   #include "M270.h"
//   62 #endif
//   63 
//   64 /*********************************************************************
//   65  * GLOBAL VARIABLES
//   66  */

        RSEG XDATA_Z:XDATA:NOROOT(0)
//   67  byte TransmitApp_Msg[ TRANSMITAPP_MAX_DATA_LEN ]; 
TransmitApp_Msg:
        DS 102
        REQUIRE __INIT_XDATA_Z

        END
//   68  
//   69 /*********************************************************************
//   70  * LOCAL VARIABLES
//   71  */
//   72 /*********************************************************************
//   73  * LOCAL FUNCTIONS
//   74  */
//   75  void M110_SensorFunction(void); // M140 Module function
//   76  void M140_SensorFunction(void); // M140 Module function
//   77  void M160_SensorFunction(void); // M160 Module function
//   78  void M170_SensorFunction(void); // M170 Module function
//   79  void M190_SensorFunction(void); // M190 Module function
//   80  void M200_SensorFunction(void); // M200 Module function
//   81  void M270_SensorFunction(void); // M270 Module function
//   82 
//   83 #if defined(M140)
//   84 /*********************************************************************
//   85  * @fn          M140_SensorFunction
//   86  * @brief       The ZIGBEE Device to receive the M140 tempture data.
//   87  */
//   88  void M140_SensorFunction(void)
//   89  {
//   90   // M140 sensor variable
//   91   uint16 val;
//   92   uint8 tmp1, tmp2, tmp3, tmp4;
//   93   
//   94   // ZCL transmit variable
//   95   uint8 len;
//   96   
//   97   // initilization the device
//   98   M140_Init();
//   99       
//  100   val = M140_GetValue();  
//  101   if((0x2000 & val) == 0x2000) // check sign bit for negative value
//  102   {
//  103     val = ((val - 16384) * 10) / 32;
//  104   }
//  105   else
//  106   {
//  107     val = (val * 10) / 32;
//  108   }
//  109   tmp1 = (val / 100) + '0';
//  110   TransmitApp_Msg[0] = tmp1;
//  111   tmp2 = ((val / 10) % 10) + '0';
//  112   TransmitApp_Msg[1] = tmp2;
//  113   tmp3 = '.';
//  114   TransmitApp_Msg[2] = tmp3;
//  115   tmp4 = (val % 10) + '0';
//  116   TransmitApp_Msg[3] = tmp4;
//  117   
//  118   len = 4;
//  119     
//  120 #if defined ( LCD_SUPPORTED )
//  121   HalLcdWriteString("* Z-Stack M140 *", HAL_LCD_LINE_1);
//  122   HalLcdWriteString(" Temp. =       C", HAL_LCD_LINE_2);
//  123   HalLcdWriteChar(HAL_LCD_LINE_2, 14, 0xDF);
//  124   HalLcdWriteChar(HAL_LCD_LINE_2, 9, tmp1);
//  125   HalLcdWriteChar(HAL_LCD_LINE_2, 10, tmp2);
//  126   HalLcdWriteChar(HAL_LCD_LINE_2, 11, tmp3);
//  127   HalLcdWriteChar(HAL_LCD_LINE_2, 12, tmp4);
//  128 #endif 
//  129 
//  130   len = 4;
//  131   uint8 temp = zcl_SendCommand( ZIGBEEDEVICE_ENDPOINT, &zclZigbeeDevice_DstAddr, ZCL_CLUSTER_ID_GEN_ON_OFF, 
//  132                                 ZCL_CLUSTER_ID_GEN_BASIC, TRUE, ZCL_FRAME_CLIENT_SERVER_DIR, false, 0, 0, len, TransmitApp_Msg );   
//  133  }
//  134 #endif
//  135 
//  136 #if defined(M160)
//  137 /*********************************************************************
//  138  * @fn          M160_SensorFunction
//  139  * @brief       The ZIGBEE Device to receive the M160 tempture data.
//  140  */
//  141  void M160_SensorFunction(void)
//  142  {
//  143   // M160 sensor variable
//  144   static uint8 duty = 50;
//  145   
//  146   // initilization the device
//  147   M160_Init();
//  148   
//  149   if (ch > 0)
//  150   {           
//  151     if (ch == 'U')
//  152     {
//  153       if (duty < 100)
//  154       {
//  155         duty = duty + 5;
//  156       }
//  157     }
//  158     
//  159     if (ch == 'N')
//  160     {
//  161       if (duty > 0)
//  162       {
//  163         duty = duty - 5;
//  164       }
//  165     }
//  166       
//  167     M160_On(duty);
//  168     #if defined ( LCD_SUPPORTED )
//  169       HalLcdWriteString("** M160 Test  **", HAL_LCD_LINE_1);
//  170       HalLcdWriteString("   Duty =     % ", HAL_LCD_LINE_2);
//  171       halLcdDisplayUint8(HAL_LCD_LINE_2, 10, HAL_LCD_RADIX_DEC, duty); 
//  172     #endif
//  173   }
//  174 //  M160_Off();
//  175  }
//  176 #endif 
//  177 
//  178  
//  179 #if defined(M170)
//  180 /*********************************************************************
//  181  * @fn          M170_SensorFunction
//  182  * @brief       The ZIGBEE Device to receive the M170 optical data.
//  183  */
//  184  void M170_SensorFunction(void)
//  185  {
//  186     // M170 sensor variable
//  187     uint16 val;
//  188     uint8 tmp1, tmp2, tmp3;
//  189     // ZCL transmit variable
//  190     uint8 len;
//  191       
//  192     // initilization the device
//  193     M170_Init();
//  194   
//  195    val = M170_GetValue();
//  196    if (val > 2000)
//  197    {
//  198       val -= 2000;
//  199    }
//  200    else
//  201     {
//  202       val = 0;
//  203     }val /= 120;
//  204             
//  205    if (val > 100)
//  206    {
//  207       val = 100;
//  208    }
//  209    
//  210    tmp1 = (val / 100) + '0';
//  211    TransmitApp_Msg[0] = tmp1;
//  212    tmp2 = ((val / 10) % 10) + '0';
//  213    TransmitApp_Msg[1] = tmp2;
//  214    tmp3 = (val % 10) + '0';
//  215    TransmitApp_Msg[2] = tmp3;
//  216    
//  217 #if defined ( LCD_SUPPORTED )
//  218    HalLcdWriteString("* Z-Stack M170 *", HAL_LCD_LINE_1);
//  219    HalLcdWriteString(" Bright =     % ", HAL_LCD_LINE_2);
//  220    HalLcdWriteChar(HAL_LCD_LINE_2, 10, tmp1);
//  221    HalLcdWriteChar(HAL_LCD_LINE_2, 11, tmp2);
//  222    HalLcdWriteChar(HAL_LCD_LINE_2, 12, tmp3);
//  223 #endif
//  224    
//  225    len = 3;
//  226    uint8 temp = zcl_SendCommand( ZIGBEEDEVICE_ENDPOINT, &zclZigbeeDevice_DstAddr, ZCL_CLUSTER_ID_GEN_ON_OFF, ZCL_CLUSTER_ID_GEN_BASIC,
//  227                                  TRUE, ZCL_FRAME_CLIENT_SERVER_DIR, false, 0, 0, len, TransmitApp_Msg );
//  228  }
//  229 #endif
//  230  
//  231 #if defined(M190)
//  232 /*********************************************************************
//  233  * @fn          M190_SensorFunction
//  234  * @brief       The ZIGBEE Device to receive the M190 optical data.
//  235  */
//  236  void M190_SensorFunction(void)
//  237  {
//  238     // M190 sensor variable
//  239     uint16 val;
//  240     uint8 tmp1, tmp2, tmp3;
//  241     
//  242     char buf[16];
//  243 
//  244     // ZCL transmit variable
//  245     uint8 len;
//  246       
//  247     // initilization the device
//  248     M190_Init();
//  249     
//  250    val = M190_GetValue();
//  251 /*   tmp1 = (val / 100) + '0';
//  252    TransmitApp_Msg[0] = tmp1;
//  253    tmp2 = ((val / 10) % 10) + '0';
//  254    TransmitApp_Msg[1] = tmp2;
//  255    tmp3 = (val % 10) + '0';
//  256    TransmitApp_Msg[2] = tmp3;
//  257 */    
//  258 
//  259     sprintf(buf, "%u", val);
//  260     HalLcdWriteString( buf, HAL_LCD_LINE_2 );
//  261 /*    
//  262 #if defined ( LCD_SUPPORTED )
//  263    HalLcdWriteString("* Z-Stack M190 *", HAL_LCD_LINE_1);
//  264    HalLcdWriteString(" ADC =     % ", HAL_LCD_LINE_2);
//  265    HalLcdWriteChar(HAL_LCD_LINE_2, 10, buffer[0]);
//  266    HalLcdWriteChar(HAL_LCD_LINE_2, 11, buffer[1]);
//  267    HalLcdWriteChar(HAL_LCD_LINE_2, 12, buffer[2]);
//  268 #endif
//  269 */   
//  270    len = 3;
//  271    uint8 temp = zcl_SendCommand( ZIGBEEDEVICE_ENDPOINT, &zclZigbeeDevice_DstAddr, ZCL_CLUSTER_ID_GEN_ON_OFF, ZCL_CLUSTER_ID_GEN_BASIC,
//  272                                  TRUE, ZCL_FRAME_CLIENT_SERVER_DIR, false, 0, 0, len, TransmitApp_Msg );
//  273  }
//  274 #endif
//  275  
//  276 #if defined(M200)
//  277 /*********************************************************************
//  278  * @fn          M200_SensorFunction
//  279  * @brief       The ZIGBEE Device to receive the M200 Temp and Humi data.
//  280  */
//  281  void M200_SensorFunction(void)
//  282  {
//  283     // M200 module variable
//  284     uint16 temp, humi;
//  285     uint8 hum_1,hum_2,hum_3,hum_4;
//  286     uint8 temp_1,temp_2,temp_3,temp_4;
//  287     uint8 len;
//  288       
//  289     // initilization the device
//  290     M200_Init();
//  291   
//  292     M200_GetValue();
//  293     temp = (uint16)(((((float)M200_Temp) *0.01) - 40.0) *10.0);
//  294     humi = (uint16)(((((float)M200_Humi) *0.0405) - (((float)M200_Humi)*((float)M200_Humi) *0.0000028) - 4.0) *10.0);
//  295     if (humi > 999)
//  296     {
//  297       humi = 999;
//  298     }
//  299     if (temp > 999)
//  300     {
//  301       temp = 999;
//  302     }
//  303     hum_1 = (humi / 100) + '0';
//  304     TransmitApp_Msg[0] = hum_1;
//  305     hum_2 = ((humi / 10) % 10) + '0';
//  306     TransmitApp_Msg[1] = hum_2;
//  307     hum_3 = '.';
//  308     TransmitApp_Msg[2] = hum_3;
//  309     hum_4 = (humi % 10) + '0';
//  310     TransmitApp_Msg[3] = hum_4;
//  311     TransmitApp_Msg[4] = ' ';
//  312     temp_1 = (temp / 100) + '0';
//  313     TransmitApp_Msg[5] = temp_1;
//  314     temp_2 = ((temp / 10) % 10) + '0';
//  315     TransmitApp_Msg[6] = temp_2;
//  316     temp_3 = '.';
//  317     TransmitApp_Msg[7] = temp_3;
//  318     temp_4 = (temp % 10) + '0';
//  319     TransmitApp_Msg[8] = temp_4;
//  320     
//  321     #if defined ( LCD_SUPPORTED )
//  322       HalLcdWriteString("Humidity=      %", HAL_LCD_LINE_1);
//  323       HalLcdWriteString(" Temp. =       C", HAL_LCD_LINE_2);
//  324       // Humi
//  325       HalLcdWriteChar(HAL_LCD_LINE_1, 10, hum_1);
//  326       HalLcdWriteChar(HAL_LCD_LINE_1, 11, hum_2);
//  327       HalLcdWriteChar(HAL_LCD_LINE_1, 12, hum_3);
//  328       HalLcdWriteChar(HAL_LCD_LINE_1, 13, hum_4);
//  329       // Temp
//  330       HalLcdWriteChar(HAL_LCD_LINE_2, 9, temp_1);
//  331       HalLcdWriteChar(HAL_LCD_LINE_2, 10, temp_2);
//  332       HalLcdWriteChar(HAL_LCD_LINE_2, 11, temp_3);
//  333       HalLcdWriteChar(HAL_LCD_LINE_2, 12, temp_4);
//  334     #endif
//  335 
//  336     len = 9;
//  337     uint8 tmp = zcl_SendCommand( ZIGBEEDEVICE_ENDPOINT, &zclZigbeeDevice_DstAddr, ZCL_CLUSTER_ID_GEN_ON_OFF, 
//  338                                  ZCL_CLUSTER_ID_GEN_BASIC, TRUE, ZCL_FRAME_CLIENT_SERVER_DIR, false, 0, 0, len, TransmitApp_Msg );
//  339  }
//  340 #endif
//  341  
//  342 #if defined(M270)
//  343 /*********************************************************************
//  344  * @fn          M270_SensorFunction
//  345  * @brief       The ZIGBEE Device to receive the M200 Temp and Humi data.
//  346  */
//  347  void M270_SensorFunction(void)
//  348  {
//  349     static uint8 udo;
//  350 
//  351     M270_Init();
//  352     
//  353      if( ch == 'A' )
//  354      {
//  355         udo = 1;
//  356         M270_SetDO(udo);
//  357      }
//  358      
//  359      if( ch == 'D' )
//  360      {
//  361         udo = 0;
//  362         M270_SetDO(udo);
//  363      }
//  364     
//  365      #if defined ( LCD_SUPPORTED )
//  366         HalLcdWriteString("** M270 Test  **", HAL_LCD_LINE_1);
//  367         HalLcdWriteString("* RELAY DO=[0] *", HAL_LCD_LINE_2);
//  368         // Show the control value
//  369         HalLcdWriteChar(HAL_LCD_LINE_2, 12, udo + '0');
//  370      #endif
//  371  }
//  372 #endif
// 
// 102 bytes in segment XDATA_Z
// 
// 102 bytes of XDATA memory
//
//Errors: none
//Warnings: none
